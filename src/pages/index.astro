---
import Layout from '../layouts/Index.astro';
import Card from '../components/Card.astro';

interface Frontmatter {
  draft?: boolean;
  title: string;
  description: string;
  dateModified: string;
  type: string;
}

const mdxes = await Astro.glob<Frontmatter>('./*.mdx');
const articles = mdxes.filter(
  ({ frontmatter: { type, draft } }) => type === 'article' && !draft
);
---

<Layout title='Welcome to Astro.'>
  <ul class='indexList'>
    {
      articles.map(
        ({ frontmatter: { title, description, dateModified }, url }) => (
          <Card {title} {description} {dateModified} url={url} />
        )
      )
    }
  </ul>
</Layout>

<style>
  .indexList {
    display: grid;
    row-gap: 48px;
    margin: 0;
    padding: 0;
  }
</style>
